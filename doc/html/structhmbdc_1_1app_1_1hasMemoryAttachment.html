<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hmbdc: hmbdc::app::hasMemoryAttachment Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">hmbdc
   </div>
   <div id="projectbrief">simplify-high-performance-messaging-programming</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehmbdc.html">hmbdc</a></li><li class="navelem"><a class="el" href="namespacehmbdc_1_1app.html">app</a></li><li class="navelem"><a class="el" href="structhmbdc_1_1app_1_1hasMemoryAttachment.html">hasMemoryAttachment</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structhmbdc_1_1app_1_1hasMemoryAttachment-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hmbdc::app::hasMemoryAttachment Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>if a specific hmbdc network transport (for example tcpcast, rmcast, and rnetmap) supports message with memory attachment, the message needs to be derived from this base - as the FIRST base, so it can be handled properly by the hmbdc network transport when sending and receiving it.  
 <a href="structhmbdc_1_1app_1_1hasMemoryAttachment.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Message_8hpp_source.html">Message.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for hmbdc::app::hasMemoryAttachment:</div>
<div class="dyncontent">
 <div class="center">
  <img src="structhmbdc_1_1app_1_1hasMemoryAttachment.png" usemap="#hmbdc::app::hasMemoryAttachment_map" alt=""/>
  <map id="hmbdc::app::hasMemoryAttachment_map" name="hmbdc::app::hasMemoryAttachment_map">
<area href="structhmbdc_1_1tips_1_1hasSharedPtrAttachment_1_1hmbdcSerialized.html" title="internal use " alt="hmbdc::tips::hasSharedPtrAttachment&lt; Message, T, use_shm_pool &gt;::hmbdcSerialized" shape="rect" coords="0,56,498,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a39eac1f30b42621dd643b0b0664323e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhmbdc_1_1app_1_1hasMemoryAttachment.html#a39eac1f30b42621dd643b0b0664323e3">hasMemoryAttachment</a> ()</td></tr>
<tr class="memdesc:a39eac1f30b42621dd643b0b0664323e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">default ctor  <a href="#a39eac1f30b42621dd643b0b0664323e3">More...</a><br /></td></tr>
<tr class="separator:a39eac1f30b42621dd643b0b0664323e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef2c95035c63398b71a639edb05c4255"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhmbdc_1_1app_1_1hasMemoryAttachment.html#aef2c95035c63398b71a639edb05c4255">hasMemoryAttachment</a> (char const *fileName)</td></tr>
<tr class="memdesc:aef2c95035c63398b71a639edb05c4255"><td class="mdescLeft">&#160;</td><td class="mdescRight">file mapped memory  <a href="#aef2c95035c63398b71a639edb05c4255">More...</a><br /></td></tr>
<tr class="separator:aef2c95035c63398b71a639edb05c4255"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:af71a96cb10dec92c6ffad91101b5c2c6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhmbdc_1_1app_1_1hasMemoryAttachment.html#af71a96cb10dec92c6ffad91101b5c2c6">unmap</a> (<a class="el" href="structhmbdc_1_1app_1_1hasMemoryAttachment.html">hasMemoryAttachment</a> *)</td></tr>
<tr class="separator:af71a96cb10dec92c6ffad91101b5c2c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a4dab69d0f12a3ded1cd8c1f0b71fffe4"><td class="memItemLeft" >union {</td></tr>
<tr class="memitem:ad7349a3a345b8f766bd4cbb9d0053f84"><td class="memItemLeft" >&#160;&#160;&#160;boost::interprocess::managed_shared_memory ::handle_t&#160;&#160;&#160;<a class="el" href="structhmbdc_1_1app_1_1hasMemoryAttachment.html#ad1541b515b077d4bd1d5403d1110c3ba">shmHandle</a></td></tr>
<tr class="separator:ad7349a3a345b8f766bd4cbb9d0053f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dab69d0f12a3ded1cd8c1f0b71fffe4"><td class="memItemLeft" valign="top">};&#160;</td><td class="memItemRight" valign="bottom"></td></tr>
<tr class="separator:a4dab69d0f12a3ded1cd8c1f0b71fffe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61bc2a285d64ba5a304f0441ba0844d9"><td class="memItemLeft" align="right" valign="top"><a id="a61bc2a285d64ba5a304f0441ba0844d9"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structhmbdc_1_1app_1_1hasMemoryAttachment.html#a61bc2a285d64ba5a304f0441ba0844d9">clientData</a> [2] = {0}</td></tr>
<tr class="memdesc:a61bc2a285d64ba5a304f0441ba0844d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">byte size of the above <br /></td></tr>
<tr class="separator:a61bc2a285d64ba5a304f0441ba0844d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>if a specific hmbdc network transport (for example tcpcast, rmcast, and rnetmap) supports message with memory attachment, the message needs to be derived from this base - as the FIRST base, so it can be handled properly by the hmbdc network transport when sending and receiving it. </p>
<p>user on the sending side cannot directly free the attachment, instead the user can provide a callback func and hmbdc will call it - the default callback function is to call free on the attachment </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a39eac1f30b42621dd643b0b0664323e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39eac1f30b42621dd643b0b0664323e3">&#9670;&nbsp;</a></span>hasMemoryAttachment() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">hmbdc::app::hasMemoryAttachment::hasMemoryAttachment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>default ctor </p>
<p>assuming attachment will be allocated and release thru heap </p>

</div>
</div>
<a id="aef2c95035c63398b71a639edb05c4255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef2c95035c63398b71a639edb05c4255">&#9670;&nbsp;</a></span>hasMemoryAttachment() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">hmbdc::app::hasMemoryAttachment::hasMemoryAttachment </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>fileName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>file mapped memory </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>file name to map </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af71a96cb10dec92c6ffad91101b5c2c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71a96cb10dec92c6ffad91101b5c2c6">&#9670;&nbsp;</a></span>unmap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hmbdc::app::hasMemoryAttachment::unmap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhmbdc_1_1app_1_1hasMemoryAttachment.html">hasMemoryAttachment</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>client can put in any data - it will be transferred around typically to be used to help in afterConsumedCleanupFunc.</p>
<p>for example, when the attached memory is managed by shared_ptr&lt;uint_8[]&gt;:</p>
<p>using SP = std::shared_ptr&lt;uint8_t[]&gt;; auto sp = SP(new uint8_t[a.len]); MemoryAttachment3 a3; a3.len = a.len; a3.attachment = sp.get(); new (a3.clientData) SP{sp}; a3.afterConsumedCleanupFunc = [](hasMemoryAttachment* h) { ((SP*)h-&gt;clientData)-&gt;~SP(); }; </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4dab69d0f12a3ded1cd8c1f0b71fffe4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dab69d0f12a3ded1cd8c1f0b71fffe4">&#9670;&nbsp;</a></span>@15</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">union { ... } </td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pointing to a func that handles cleaning up the attachment it is automatically set, but user can change it as desire when the sending side is done with this message, user code should never explicitly call this function </p>

</div>
</div>
<a id="ad1541b515b077d4bd1d5403d1110c3ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1541b515b077d4bd1d5403d1110c3ba">&#9670;&nbsp;</a></span>shmHandle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::interprocess::managed_shared_memory ::handle_t hmbdc::app::hasMemoryAttachment::shmHandle</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>pointer to the attachment bytes - see clientData data member usage if those bytes are already managed by shared_ptr mechanism </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>hmbdc/app/<a class="el" href="Message_8hpp_source.html">Message.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
